<div class=cart-sidebar ng-class="{ 'open-cart' : showCart, 'loggedin' : user, 'cartEnabled' : cartEnabled }"><div class=header><h2>Your Order</h2><p ng-if="order && !global.below_order_minimum">You’re almost there! Please review the details below and hit ‘Place Order’.</p><a class=close ng-click=toggleCart(false)><i class=icon-cancel></i></a></div><form name=cart_form ng-class="{submitted: submitted}" ng-submit=placeOrder() novalidate><fieldset><div class=orderType><label><i class=icon-lock></i> Order Type</label><select ng-if="cart.order_type !== 'Group'" name=orderType ng-model=cart.order_type fancy-default={{cart.order_type}} fancy-select=""><option value=Delivery fancy-option="">Delivery<option value=Pickup fancy-option="">Pickup</select><span class=value ng-if="cart.order_type == 'Group'">Business class group order, company covers delivery fee and contributes {{ (user.address.active_order_template.contribution_amount | currency) || 'some amount' }} and the excess is paid by employee.</span></div><div class=address ng-if="cart.order_type != 'Pickup'"><label><i class=icon-location></i> Address</label><span class=value ng-if=user.address>{{ user.address.address }} {{ user.address.address2 }}<br>{{ user.address.city }}, {{ user.address.state }}</span> <span class=value ng-if=!user.address>Not set</span></div><div class=address ng-if="cart.order_type != 'Group'"><label><i class=icon-phone></i> Phone Number</label><input class=input type=tel name=phone ng-model=user.address.phone mask="(999) 999-9999" required></div><!--
			<div class="deliverytime">
				<label><i class="icon-deliverytime"></i> Delivery Time</label>
				<select name="delivertytime" ng-model="deliverytime" fancy-default="ASAP" fancy-select>
					<option value="0" fancy-option>ASAP</option>
					<option value="60" fancy-option>in an hour</option>
				</select>
			</div>
			--></fieldset><section class=details id=cart-order-details><h3>Order Details</h3><p ng-if=!order.id>There is nothing in your bag.</p><ul><li ng-repeat="item in order.items" ng-class="{ to_be_removed: item.to_be_removed }"><span class=t>{{ item.item.name || item.name }} <i class=notes ng-if=item.notes>{{ item.notes }}</i></span> <span class=d><span class=p>{{ item.price | currency }}</span> <span ng-if=!item.to_be_removed><a href=# class=edit ng-click=item.edit(order)><i class=icon-edit></i></a> <a href=# class=delete ng-click=remove(item)><i class=icon-cancel></i></a></span></span></li></ul></section><section class=price ng-if=order.id><dl><dt>Food / Beverage Total</dt><dd>{{ order.subtotal | currency }}</dd><div ng-if=order.tax><dt>Sales Tax</dt><dd>{{ order.tax | currency }}</dd></div><div ng-if="cart.order_type == 'Group'"><dt>Company Contribution</dt><dd><span class=align-brackets>({{ order.contributed | currency }})</span></dd></div><div ng-if="cart.order_type != 'Group'"><dt>Delivery fee <span ng-if=order.order_delivery_fee class="icon-help text--gray" title="The delivery fee is assigned by the restaurant. Bask does not receive any portion of this fee at all." tooltip=""></span></dt><dd>{{ cart.order_delivery_fee | currency }}</dd></div><div ng-if="order.discount > 0"><dt>Discount <span ng-if="order.discount_percent > 0">({{ Math.round(order.discount_percent * 100) }}%)</span></dt><dd><span class=align-brackets>{{ -order.discount | currency }}</span></dd></div></dl><dl ng-if=cart.used_tip><dt>Tip</dt><dd><select name=tip ng-model=cart.tip fancy-default="{{ cart.tip }}" filter=currency fancy-select=""><option value=1.00 fancy-option="">$1.00<option value=1.50 fancy-option="">$1.50<option value=2.00 fancy-option="">$2.00<option value=2.50 fancy-option="">$2.50<option value=3.00 fancy-option="">$3.00<option value=3.50 fancy-option="">$3.50<option value=4.00 fancy-option="">$4.00<option value=4.50 fancy-option="">$4.50</select></dd></dl></section><section ng-show=order.id class=total><h3>Total <span>{{ cart.order_total | currency }}</span></h3><div ng-if=global.below_order_minimum><p class=insufficient>You haven’t met the minimum yet.<br>Keep ordering.</p><button type=button ng-click=toggleCart(false);>Keep Ordering</button></div><div ng-if="order.total && !global.below_order_minimum"><label ng-if=cards.length><i class=icon-creditcard></i> Choose Your Card or Enter Another</label><label ng-if=!cards.length><i class=icon-creditcard></i> Enter Card Number Below</label><div class=stored-cards ng-if=cards.length><div class=radio ng-repeat="card in cards"><span class=cccvv><input ng-model=card.cvv name="input cccvv" class="input cccvv" placeholder=CVV ng-minlength=3 maxlength=4 numeric="" ng-click="data.credit_card = card" ng-required="data.credit_card.id == card.id"><a tabindex=-1 class=cvv-help href=#help ng-click=showCVVHelp()><span class=icon-help></span></a></span><label onclick="$(this).prev().find('input').focus()"><input type=radio ng-value=card ng-model=data.credit_card fancy-check=""><span ng-if=!card.label ng-bind-html=boldFirstWord(card.display_label)></span> <span ng-if=card.label ng-bind=card.label></span></label></div><label class=radio><input type=radio ng-value={} ng-model=data.credit_card fancy-check=""><span>Use a Different Card</span></label></div><div class=new-card ng-if=!data.credit_card.id ng-init="new_credit_card = {}"><input ng-model=new_credit_card.number autocomplete=off name=cardnumber class="input cardnumber" placeholder="Card Number" ng-minlength=13 maxlength=16 numeric="" required><span class="input expdate"><input ng-model=new_credit_card.date autocomplete=off name=expdate class="input expdate" placeholder=MM/YY mask=99/99 required></span> <span class="input cccvv"><input ng-model=new_credit_card.cvv autocomplete=off name=cccvv class="input cccvv" placeholder=CVV mask=999?9 required><a tabindex=-1 class=cvv-help href=#help ng-click=showCVVHelp()><span class=icon-help></span></a></span> <span class="input zip"><input ng-model=new_credit_card.zip autocomplete=off name=zip class="input zip" placeholder="Billing Zip" mask=99999 required></span><label class=checkbox><input type=checkbox ng-model=new_credit_card.save_card name=save_card ng-checked=true fancy-check=""><span>Save card</span></label></div></div><button type=submit ng-class="{ 'enabled': cart_form.$valid }" ng-if=!global.below_order_minimum>Place Order</button><div class=disclaimer>You will be charged via {{ incomplete_order.restaurant.source_id == 1 ? 'grubhub.com' : 'delivery.com' }}</div><a class=cancel ng-if=order.id href=# ng-click=order.cancel()>Cancel Order</a></section></form></div>