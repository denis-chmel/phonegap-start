<!-- /app/src/views/dishes/index.html --><div class=dishes><div ng-if=!isMobileMode() ng-include="'/release/html/views/dishes/filters.html'"></div><div class="content dishes-content"><div ng-include="'/release/html/views/dishes/header.html'"></div><div class=results ng-swipe-right=prev() ng-swipe-left=next()><div ng-include="'/release/html/views/dishes/filter-info.html'"></div><div ng-if=dishes.length class=dishes-wrapper><div class=dishesslider><ul class=dishes data-current-index="{{ currentIndex }}" ng-style="{ width: dishes.length * dishWidth, marginLeft: - currentIndex * dishWidth }"><li ng-repeat="(key, dish) in dishes" dish=""><div class=dish-container ng-style="{ width: dishWidth }"><div class=angular-dummy>&nbsp;</div><div ng-if="currentIndex - key <= perPage && currentIndex - key > -2*perPage"><div ng-if=!dish.id class="dish slot" ng-style="{ height: cardBaseHeight + 15 + (user.goals.length ? (55 + 26 * user.goals.length) : 0) }"></div><div ng-if=dish.id class="dish flip-container" ng-init="goalsHeight = (dish.scores.length ? (55 + 26 * user.goals.length) : 0)" ng-style="{ height: (isFullMenu ? 40 : 0) + cardBaseHeight + 15 + goalsHeight }" ng-class="{ reverse: dish.reverse }"><h1 class="section-name engraved" ng-if=isFullMenu><span ng-if="(dish.menu_section_id != dishes[$index - 1].menu_section_id)">{{ dish.section_name }}</span></h1><div class=flipper><div class=front><div class=top><section class=restaurant><figure><span ng-style="{ 'background-image': 'url('+ dish.restaurant.image_url +')', opacity: dish.restaurant.image_url ? false : 0.7 }"></span></figure><div class=left title="{{ dish.restaurant.name }}"><a class=unlink href=# url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false">{{ dish.restaurant.name | truncate:29 }}</a><div><span class=icon-tastes></span> <a href=# url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false" ng-class="{ unlink: data.filters.restaurant_id == dish.restaurant.id }">See full menu</a></div></div><div class=right><div style="margin-top: 22px">min order ${{ Math.ceil(dish.restaurant.minimum_order) }} <span class=icon-bag></span></div></div><div class=bookmark-heart ng-click=user.toggleFavorite(dish) ng-class="{ active: user.wishlist.indexOf(dish.menu_item_id) > -1 }" title="Add to favorites"></div></section><h1><a href="?id={{dish.id}}" ng-click=selectDish(dish.id)><span ng-if=dish.has_custom_schedule class="icon icon-clock" title="Only available between {{dish.available_days.0.intervalString }}." tooltip=""></span> {{ dish.name }}</a></h1><article title="{{ dish.description }}">{{ dish.description | truncate:(115 - dish.name.length) }}</article><span class=price>{{ dish.price | currency }}</span><div class=ribbon-wrapper-green ng-if="incomplete_order.details.item_ids.indexOf(dish.id) > -1"><div class=ribbon-green>in bag</div></div></div><div class=bottom><div class=scores ng-if=dish.scores.length><div class=hint title="The percentages below represent how well the dish achieves each of your specific health goals based on expert nutritionist data and Bask's proprietary intelligence." tooltip="">How this dish achieves your goal<span ng-if="dish.scores.length > 1">s</span>&nbsp;<span class=icon-help></span></div><div class=score ng-repeat="score in dish.scores"><div class=progressbar title="{{score.goal.name}}: {{ Math.ceil(score.value * 100) }}%"><div class=text><figure class="goal-small-icon goal-{{ score.goal.id }}"></figure><div class=goal>{{score.goal.name}}</div><div class=percent>{{ Math.ceil(score.value * 100) }}%</div></div><div class=progress ng-style="{ width: Math.min(100, Math.ceil(score.value * 100)) + '%' }"></div></div></div></div></div><div ng-if=dish.is_available_now><div ng-switch="incomplete_order && (incomplete_order.restaurant.id != dish.restaurant.id)"><span ng-switch-when=true class="button button-main" title="You have dishes from another restaurant in your bag. Cancel the order or empty your bag to select this dish." tooltip="">Empty Bag to Select</span> <a ng-switch-default="" href=# ng-click=selectDish(dish.id) class="button button-main">Order</a></div></div><span ng-if=!dish.is_available_now class="button button-main" title="Please check back {{dish.available_days.0.day}} between {{dish.available_days.0.intervalString }}" tooltip=""><span class=icon-clock></span> Not Available Now</span> <a ng-if=!isFavoritesPage class=rotate ng-click=dislikeDialog(dish)><u>Don't show this dish again</u></a> <!-- <a ng-if="!isFavoritesPage" class="rotate" ng-click="showCardBack(dish)"><u>Rotate card</u></a> --></div><div class=back><div ng-if=!dish.hideReverse><section class=restaurant><figure><span ng-style="{ 'background-image': 'url('+ dish.restaurant.image_url +')', opacity: dish.restaurant.image_url ? false : 0.7 }"></span></figure></section><form class="contents form-control scrollbox" ng-style="{ height: cardBackBaseHeight + 15 + goalsHeight }"><p ng-if=!dish.keywords.length>Please confirm your dislike of this dish.</p><p ng-if=dish.keywords.length>Help us understand your tastes better.</p><p ng-if=dish.keywords.length>What exactly don't you like in <em>{{ dish.name }}</em>?</p><div class=checkboxes><div class="form-group form" data-ng-repeat="keyword in dish.keywords"><label class=radio><input type=checkbox ng-model=keyword.dislike ng-checked=user.isDislikingIngredient(keyword.text) fancy-check=""><span ng-class="{ strikeout: keyword.dislike }">{{ keyword.text }}</span></label></div></div></form><a ng-click=dislike(dish) class="button button-main">Confirm Dislike</a> <a class=unrotate ng-click=showCardFront(dish)><u>I've changed my mind</u></a></div></div></div></div></div></div></li></ul></div></div><div class=prevnext ng-if=dishes.length><a href=# class=prev ng-click=prev() ng-class="{ disabled: currentIndex <= 0 }"><span class=icon-arrowleft></span></a> <a href=# class=next ng-click=next() ng-class="{ disabled: currentIndex + perPage >= dishes.length }"><span class=icon-arrowright></span></a></div><div ng-if=!dishes.length class=no-results><div ng-if=isFavoritesPage><h2 class=engraved>No Favorites</h2><p class=engraved>You have nothing in your favorites now. Bookmark any dish from your <a ui-sref=primary.dishes>recommendations</a> to easily find it here at any time.</p></div><div ng-if=!isFavoritesPage><div ng-if=!user.address><h2 class=engraved>No Recommendations</h2><p class=engraved>You have no locations saved with your account. You must <a href=# ng-click=addNewAddress()>add a location</a> before you can get recommendations.</p></div><div ng-if="user.address && !dish && !incomplete_order"><h2 class=engraved>No Recommendations in Your Area</h2><p class=engraved>Unfortunately we cannot recommend any dishes that can be delivered to you that match your criteria. Please update your goals, diet type or search fields to get recommendations.</p></div><div ng-if="user.address && (dish || incomplete_order)"><h2 class=engraved>No Recommendations</h2><p class=engraved>Unfortunately, <em>{{ dish.restaurant.name || incomplete_order.restaurant.name }}</em> has no dishes in <em>{{ section.name }}</em> that match your health goals and diet preferences.</p></div></div></div></div></div></div><div ng-if=isMobileMode() id=pseudo-modal-filters class="center-on-mobile modal" ng-show1=openFilters ng-class="{ current: openFilters }"><div class=modal-backdrop ng-click=toggleMoreFilters(0)></div><div class=modal-dialog><div><div class="modal-content modal-filters"><div class=header><h2>Search Dishes</h2></div><div class=body><div ng-include="'/release/html/views/dishes/filters-form.html'"></div></div><div class=buttons><button class=submit type=button ng-click=applyFilters()>Apply Filters</button></div></div></div><a class=modal-close href=# ng-click=toggleMoreFilters(0)><i class=icon-cancel></i></a></div></div>