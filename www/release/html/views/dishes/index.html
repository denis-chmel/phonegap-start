<!-- /app/src/views/dishes/index.html --><div class=dishes><div class=content><div class=header ng-if="!dish && !incomplete_order"><h1>Your Recommendations</h1><h2>The dishes below were selected to meet your health goals, diet types and taste preferences from restaurants that deliver to your location.</h2></div><div class=header ng-if="!dish && incomplete_order"><h1>Your Recommendations</h1><span class=mobile ng-if="incomplete_order.details.check.lines.amount_due <= incomplete_order.details.check.minimum"><em>{{ incomplete_order.details.check.minimum - incomplete_order.details.check.lines.amount_due | currency }}</em> left to meet minimum</span><h2 ng-if="incomplete_order.details.check.lines.amount_due <= incomplete_order.details.check.minimum">You have <strong>{{ incomplete_order.totalItems }}</strong> dish<span ng-if="incomplete_order.details.items.length > 1">es</span> from <strong>{{ incomplete_order.restaurant.name }}</strong> in your bag. You need to spend another <strong class=amount-required>{{ incomplete_order.details.check.minimum - incomplete_order.details.check.lines.amount_due | currency }}</strong> to reach the delivery minimum. Why not add something from the <strong>{{ section }}</strong> section below?</h2><h2 ng-if="incomplete_order.details.check.lines.amount_due >= incomplete_order.details.check.minimum">You have <strong>{{ incomplete_order.totalItems }}</strong> dish<span ng-if="incomplete_order.details.items.length > 1">es</span> from <strong>{{ incomplete_order.restaurant.name }}</strong> in your bag. You can add more or <a href=# ng-click=toggleCart();>checkout now</a>.</h2></div><div class=header ng-if=dish><h1>Item Added To Your Bag.</h1><span class=mobile ng-if="order.check.lines.amount_due <= dish.restaurant.minimum_order"><em>{{ dish.restaurant.minimum_order - order.check.lines.amount_due | currency }}</em> left to meet minimum</span><h2 ng-if="incomplete_order.details.check.lines.amount_due <= dish.restaurant.minimum_order">{{ dish.name }} has been added to your bag.<br>You need <strong class=amount-required>{{ dish.restaurant.minimum_order - incomplete_order.details.check.lines.amount_due | currency }} more</strong> to meet the checkout minimum.<br>Here are more recommendations from <strong>{{ dish.restaurant.name }}</strong> from the <strong>{{ section }}</strong> section.</h2><h2 ng-if="incomplete_order.details.check.lines.amount_due >= dish.restaurant.minimum_order">{{ dish.name }} has been added to your bag.<br>Take a look at the following <strong>{{ section }} options</strong> from <strong>{{ dish.restaurant.name }}</strong> or <a href=# ng-click=toggleCart();>checkout now</a>.</h2></div><div class=controls ng-class="{ 'no-cuisine': incomplete_order || dish, 'showMobile' : expandedSearch }"><form ng-submit=submit() name=search><select name=address class=address ng-class="{ 'disabled': dish || incomplete_order }" ng-model=address fancy-default="{{ address.name }}" fancy-select=""><option value="{{ address }}" ng-repeat="address in addresses" fancy-option="">{{ address.name }}<option value="" ng-click=addNewAddress() fancy-option="">Add New Address</select><i class="icon-search mobile" ng-click=toggleSearch()></i><div class=foodtype><input name=keyword ng-model=keyword class=foodtype placeholder="Add Food Typesâ€¦"><button type=submit ng-class="{ active: search.keyword.$dirty && search.keyword.$viewValue != '' }">Submit</button></div><select name=section class=dish ng-model=section fancy-default="{{ section }}" fancy-select=""><option value="{{ section }}" ng-repeat="section in sections" fancy-option="">{{ section }}</select><select ng-if="!dish && !incomplete_order" name=cuisine class=cuisine ng-model=cuisine fancy-default="All Cuisines" fancy-select=""><option value=null fancy-option="">All Cuisines<option ng-repeat="(key, cuisine) in cuisines" value="{{ cuisine.id }}" fancy-option="">{{ cuisine.cuisine }}</select></form></div><div class=results id=resultholder><div ng-if=dishes.length><div class=dishesslider><ul class=dishes><li ng-repeat="(key, dish) in dishes" dish=""><div><section class=restaurant><figure><span ng-style="{ 'background-image': 'url('+ dish.restaurant.image_url +')' }"></span></figure><span class=name>{{ dish.restaurant.name }}</span> <span class=distance>{{ Math.round(dish.distance * 10) / 10 }}mi away</span></section><h1>{{ dish.name }}</h1><article>{{ dish.description }}</article><span class=price>{{ dish.price | currency }}</span> <a class=reject ng-click=dislike(dish)><u>Don't show this dish again</u></a> <a ng-click=dish.select() class=button>Select This {{ dish.dish }}</a></div></li></ul></div><div class=prevnext><a href=# class=prev ng-click=prev() ng-class="{ disabled: currentIndex < perPage }"><span></span> Last {{ perPage > 1 ? perPage +' items' : 'item' }}</a> <a href=# class=next ng-click=next() ng-class="{ disabled: currentIndex + perPage >= dishesCount }"><span></span> Next {{ perPage > 1 ? perPage +' items' : 'item' }}</a></div></div><div ng-if=!dishes.length class=no-results><div ng-if=!$loading.soft><div ng-if="!dish && !incomplete_order"><h2>No Recommendations in Your Area</h2><p>Unfortunately we cannot recommend any dishes that can be delivered to you that match your criteria. Please update your goals, diet type or search fields to get recommendations.</p></div><div ng-if="dish || incomplete_order"><h2>No Recommendations</h2><p>Unfortunately, <em>{{ dish.restaurant.name || incomplete_order.restaurant.name }}</em> has no dishes in <em>{{ section }}</em> that match your health goals and diet preferences.</p></div></div></div></div></div></div>