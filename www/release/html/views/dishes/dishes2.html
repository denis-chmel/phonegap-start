<!-- /app/src/views/dishes/index.html --><div class=dishes><div ng-include="'/release/html/views/dishes/filters.html'"></div><div class="content dishes-content"><div ng-include="'/release/html/views/dishes/header.html'"></div><div class=results><div ng-include="'/release/html/views/dishes/filter-info.html'"></div><div ng-if=dishes.length class=dishes-wrapper><div class=dishesslider><ul class=dishes data-current-index="{{ currentIndex }}"><li ng-repeat="(key, dish) in dishes" ng-if="(page == Math.floor($index / max_per_page) + 1) && (dish.id || isAlreadyLoading)" data-dish-index="{{ $index }}" ng-style="{ width: Math.floor(100 / perPage) + '%' } " dish=""><h1 class=section-name-to-move ng-if="isFullMenu && !isAlreadyLoading && dish.menu_section_id != dishes[$index - 1].menu_section_id" ng-class="{ first: $first }">{{ dish.section_name }}</h1><div class=dish-container ng-style="{ 'min-height': cardBaseHeight - 20 + (user.goals.length ? (55 + 26 * user.goals.length) : 0) }"><span class=dish-index>{{ $index + 1}}</span><div><div ng-if=isAlreadyLoading class="dish slot" ng-style="{ height: cardBaseHeight - 20 + (user.goals.length ? (55 + 26 * user.goals.length) : 0) }"></div><div ng-if="dish.id && !isAlreadyLoading" class="dish flip-container" ng-init="goalsHeight = (dish.scores.length ? (55 + 26 * user.goals.length) : 0)" ng-style="{ height: cardBaseHeight - 20 + goalsHeight }" ng-class="{ reverse: dish.reverse }"><div class=flipper><div class=front><div class=top><section class=restaurant><div class=right><div style="margin-top: 22px">min order ${{ Math.ceil(dish.restaurant.minimum_order) }}</div></div><div class=bookmark-heart style="top: 15px" ng-click=user.toggleFavorite(dish) ng-class="{ active: user.wishlist.indexOf(dish.menu_item_id) > -1 }" title="Add to favorites"></div><div class=left title="{{ dish.restaurant.name }}"><a class=unlink ng-href="/restaurant/{{ dish.restaurant.id }}" url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false">{{ dish.restaurant.name | truncate:29 }}</a><div><a ng-class="{ unlink: data.filters.restaurant_id == dish.restaurant.id }" href=# url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false">See full menu</a></div></div></section><h1><a href="?id={{dish.id}}" ng-click=selectDish(dish.id)><span ng-if=dish.has_custom_schedule class="icon icon-clock" title="Only available between {{dish.available_days.0.intervalString }}." tooltip=""></span> {{ dish.name }}</a></h1><article title="{{ dish.description }}">{{ dish.description | truncate:(125 - dish.name.length) }}</article><span class=price>{{ dish.price | currency }}</span><div class=ribbon-wrapper-green ng-if="incomplete_order.details.item_ids.indexOf(dish.id) > -1"><div class=ribbon-green>in bag</div></div></div><div class=bottom><div class=scores ng-if=dish.scores.length><div class=hint title="The percentages below represent how well the dish achieves each of your specific health goals based on expert nutritionist data and Bask's proprietary intelligence." tooltip="">How this dish achieves your goal<span ng-if="dish.scores.length > 1">s</span>&nbsp;<span class=icon-help></span></div><div class=score ng-repeat="score in dish.scores"><div class=progressbar title="{{score.goal.name}}: {{ Math.ceil(score.value * 100) }}%"><div class=text><figure class="goal-small-icon goal-{{ score.goal.id }}"></figure><div class=goal>{{score.goal.name}}</div><div class=percent>{{ Math.ceil(score.value * 100) }}%</div></div><div class=progress ng-style="{ width: Math.min(100, Math.ceil(score.value * 100)) + '%' }"></div></div></div></div></div><div ng-if=dish.is_available_now><div ng-switch="incomplete_order && (incomplete_order.restaurant.id != dish.restaurant.id)"><span ng-switch-when=true class="button button-main" title="You have dishes from another restaurant in your bag. Cancel the order or empty your bag to select this dish." tooltip="">Empty Bag to Select</span> <a ng-switch-default="" href=# ng-click=selectDish(dish.id) class="button button-main">Order</a></div></div><span ng-if=!dish.is_available_now class="button button-main" title="Please check back {{dish.available_days.0.day}} between {{dish.available_days.0.intervalString }}" tooltip=""><span class=icon-clock></span> Not Available Now</span> <a ng-if=!isFavoritesPage class=rotate ng-click=dislikeDialog(dish)><u>Don't show this dish again</u></a></div></div></div></div></div></li></ul></div></div><div class=clearfix></div><div class=prevnext ng-if=dishes.length><a href=# class=prev ng-click=prev(1) ng-class="{ disabled: page <= 1 }"><span class=icon-arrowleft></span> Previous</a> <a href=# class=next ng-click=next(1) ng-class="{ disabled: isEverythingLoaded && page >= last_page }">Next <span class=icon-arrowright></span></a></div><div ng-if=!dishes.length class=no-results><div ng-if=isFavoritesPage><h2 class=engraved>No Favorites</h2><p class=engraved>You have nothing in your favorites now. Bookmark any dish from your <a ui-sref=primary.dishes>recommendations</a> to easily find it here at any time.</p></div><div ng-if=!isFavoritesPage><div ng-if=!user.address><h2 class=engraved>No Recommendations</h2><p class=engraved>You have no locations saved with your account. You must <a href=# ng-click=addNewAddress()>add a location</a> before you can get recommendations.</p></div><div ng-if="user.address && !dish && !incomplete_order"><h2 class=engraved>No Recommendations in Your Area</h2><p class=engraved>Unfortunately we cannot recommend any dishes that can be delivered to you that match your criteria. Please update your goals, diet type or search fields to get recommendations.</p></div><div ng-if="user.address && (dish || incomplete_order)"><h2 class=engraved>No Recommendations</h2><p class=engraved>Unfortunately, <em>{{ dish.restaurant.name || incomplete_order.restaurant.name }}</em> has no dishes in <em>{{ section.name }}</em> that match your health goals and diet preferences.</p></div></div></div></div></div></div>