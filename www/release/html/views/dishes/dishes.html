<!-- /app/src/views/dishes/index.html --><div class=dishes><div ng-if=!showFiltersInModal() ng-include="'/release/html/views/dishes/filters.html'"></div><div class="content dishes-content"><!--
<div ng-include="'/release/html/views/dishes/header.html'"></div>
--><div class=results><div ng-include="'/release/html/views/dishes/filter-info.html'"></div><div class=dishes-wrapper><h1 ng-if=restaurant.id class=restaurant-section><form><select name=section class="dish section-switcher" ng-model=data.filters.section_id fancy-default="{{ section.name || data.all_sections_label }}" fancy-select=""><option value="" fancy-option="">{{ data.all_sections_label }}<option value="{{ section.id || section.name }}" ng-repeat="section in data.sections" is-option-grayed="{{ restaurant.id && !section.count }}" fancy-option="">{{ section.name }} {{section.count ? '(' + section.count + ')' : '' }}</select></form></h1><ul ng-if=dishes.length class=dishes><h3>Your recommendations</h3><!--<p class="hint">Duis ut urna at elit auctor porta nec consectetur est. Suspendisse potenti.</p>--><li ng-repeat="(key, dish) in dishes" data-dish-index="{{ $index }}" dish=""><h2 ng-if="dishes[0].result_type && dish.result_type != dishes[key - 1].result_type"><span ng-if="dish.result_type == 'suggested_favorite'">Your Favorites <span class=view-more>(<a href=# ui-sref=primary.wishlist>View All</a>)</span></span> <span ng-if="dish.result_type == 'suggested_to_reorder'">Past Orders <span class=view-more>(<a href=# ui-sref=primary.account.orders>View All</a>)</span></span> <span ng-if=!dish.result_type>Your Recommendations</span></h2><div class=dish-container><div ng-if=isAlreadyLoading class="dish slot"></div><div ng-if="dish.id && !isAlreadyLoading" class="dish flip-container flip-container-vertical" ng-class="{ reverse: dish.reverse }"><section class=restaurant ng-if="dish.restaurant.id != dishes[$index-1].restaurant.id"><div class=row><div class="col-md-7 col-xs-6 col-restaurant-info"><div class=rating ng-if=dish.restaurant.rating_img_url><!--<img height="12" ng-src="{{ dish.restaurant.rating_img_url }}">--><img src=https://dl.dropboxusercontent.com/u/15243470/Temp/gobask/four_star_rating.png height=12></div><h2 class=name title="{{ dish.restaurant.name }}">{{ dish.restaurant.name }}</h2></div><div class="col-md-5 col-xs-6 col-restaurant-links"><h3><span class=icon-bag></span> <span>Min order ${{ Math.ceil(dish.restaurant.minimum_order) }}</span></h3><h3 ng-if=dish.restaurant.review_count><span class=icon-male></span> <a href=# ng-click=showReviews(dish)>Reviews (<span ng-bind=dish.restaurant.review_count></span>)</a></h3><h3 url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false"><span class=icon-tastes></span> <a ui-sref="primary.dishes({ restaurant: dish.restaurant.id })">See full menu</a></h3><h3 class=photos-link><span class=icon-location></span> <a href=# ng-click="dishGallery(dish, $index)" title="{{ dish.restaurant.name }}" fancybox="">Photos</a></h3></div></div><div class="photos row"><div class=col-xs-3 ng-repeat="image in dish.restaurant.images"><figure><a ng-if=image.url href=# ng-click="dishGallery(dish, $index)" title="{{ dish.restaurant.name }}" fancybox=""><span ng-style="{ 'background-image': 'url(' + image.thumbnail_url + ')' }"><i class="{{ image.type }}"></i></span></a> <span ng-if=!image.url class=loading></span></figure></div></div></section><div class=front><div class=ribbon-wrapper-green ng-if="incomplete_order.item_ids.indexOf(dish.id) > -1"><div class=ribbon-green>in bag</div></div><h1><span class="price pull-right">{{ dish.min_price | currency }}</span> <a ui-sref="primary.dishes({ id: dish.id })" ng-click=dishDetailsModal(dish)><span ng-if=dish.has_custom_schedule class="icon icon-clock" title="Only available between {{dish.available_days.0.intervalString }}." tooltip=""></span> {{ dish.name }}</a></h1><article>{{ dish.description }}</article><div class=row><div class=col-xs-6><span ng-if=dish.is_available_now><span ng-switch="incomplete_order && (incomplete_order.restaurant.id != dish.restaurant.id)"><span ng-switch-when=true class="btn btn--small" title="You have dishes from another restaurant in your bag. Cancel the order or empty your bag to select this dish." tooltip="">Empty Bag to Select</span> <a ng-switch-default="" ui-sref="primary.dishes({ id: dish.id })" ng-click=dishDetailsModal(dish) class="btn btn--small btn--primary">Order</a></span></span> <span ng-if=!dish.is_available_now class="btn btn--small btn--default" title="Please check back {{dish.available_days.0.day}} between {{dish.available_days.0.intervalString }}" tooltip=""><span class=icon-clock></span> N/A now</span></div><div class="col-xs-6 similar-dish-link"><span class=between-like-and-dislike></span> <a href=#>Show similar dishes</a></div></div><div class="debug-links debug"><a ng-if="dish.restaurant.source_id == 1" href="https://www.grubhub.com/restaurant/{{ dish.restaurant.external_id }}" target=_blank style="color: #C51230">Grubhub</a> <a ng-if="dish.restaurant.source_id == 2" href="https://www.google.com/search?q=site:delivery.com+'{{ dish.restaurant.name.split(' ').join('+') }}'" title="{{ dish.restaurant.external_id }}" target=_blank style="color: #3B5A8B">Delivery</a> <a ng-if=dish.restaurant.yelp_id href="http://www.yelp.com/biz/{{ dish.restaurant.yelp_id }}" target=_blank>Y</a>&nbsp; <a ng-if=dish.restaurant.foursquare_id href="https://foursquare.com/v/{{ dish.restaurant.foursquare_id }}" target=_blank>4</a></div></div></div></div></li></ul><div ng-if="!dishes.length && !isAlreadyLoading" class=no-results><div ng-if=isFavoritesPage><h2 class=engraved>No Favorites</h2><p class=engraved>You have nothing in your favorites now. Bookmark any dish from your <a ui-sref=primary.dishes>recommendations</a> to easily find it here at any time.</p></div><div ng-if=!isFavoritesPage><div ng-if=!user.address><h2 class=engraved>No Recommendations</h2><p class=engraved>You have no locations saved with your account. You must <a href=# ng-click=addNewAddress()>add a location</a> before you can get recommendations.</p></div><div ng-if=user.address><div ng-if=!data.restaurants_count><h2><img class=closed-sign src=/release/img/closed.png alt="No Open Restaurants"></h2><p class=engraved>There are no restaurants currently open in your area.<br>Check back later to get your meal recommendations.</p></div><div ng-if=data.restaurants_count><div ng-if="!dish && !incomplete_order"><h2 class=engraved>No Recommendations in Your Area</h2><p class=engraved>Unfortunately we cannot recommend any dishes that can be delivered to you that match your criteria. Please update your goals, diet type or search fields to get recommendations.</p></div><div ng-if="(dish || incomplete_order)"><h2 class=engraved>No Recommendations</h2><p class=engraved>Unfortunately, <em>{{ dish.restaurant.name || incomplete_order.restaurant.name }}</em> has no dishes in <em>{{ section.name }}</em> that match your preferences.</p></div></div></div></div></div></div><div class=clearfix></div><div class=row ng-if="dishes.length && !data.filters.restaurant_id" style="margin: 0"><div class="col-xs-5 pages-info">{{ data.page * data.max_per_page + 1 }} - {{ data.page * data.max_per_page + dishes.length }} out of {{ data.total_records }} results</div><div class="col-xs-7 prevnext"><a href=# class="prev btn btn--silver" ng-click=switchPage(-1) ng-class="{ disabled: data.page <= 0 }"><span class=icon-arrowleft></span> <span class=text>Previous</span></a> <a href=# class="next btn btn--silver" ng-click=switchPage(+1) ng-class="{ disabled: isLastPage() }"><span class=text>Next</span> <span class=icon-arrowright></span></a></div></div><div class=clearfix></div></div></div></div><div ng-if=showFiltersInModal() id=pseudo-modal-filters class="center-on-mobile modal" ng-class="{ current: openFilters }"><div class=modal-backdrop ng-click=toggleMoreFilters(0)></div><div class=modal-dialog><div><div class="modal-content modal-filters"><div class=header><h2>Search Dishes</h2></div><div class=body><div ng-include="'/release/html/views/dishes/filters-form.html'"></div></div><div class=buttons><button class=submit type=button ng-click=applyFilters()>Apply Filters</button></div></div></div><a class=modal-close href=# ng-click=toggleMoreFilters(0)><i class=icon-cancel></i></a></div></div>