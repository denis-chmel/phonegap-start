<!-- /app/src/views/dishes/index.html --><div class=dishes><div ng-if=!showFiltersInModal() ng-include="'/release/html/views/dishes/filters.html'"></div><div class="content dishes-content"><div ng-include="'/release/html/views/dishes/header.html'"></div><div class=results><div ng-include="'/release/html/views/dishes/filter-info.html'"></div><div ng-if=dishes.length class=dishes-wrapper><ul class=dishes data-current-index="{{ currentIndex }}"><li ng-repeat="(key, dish) in dishes" data-dish-index="{{ $index }}" ng-if="page == Math.floor($index / max_per_page) + 1" dish=""><h1 ng-if="isFullMenu && !isAlreadyLoading && dish.menu_section_id != dishes[$index - 1].menu_section_id" ng-class="{ first: $index % max_per_page == 0 }">{{ dish.section_name }}</h1><div class=dish-container><div ng-if=isAlreadyLoading class="dish slot"></div><div ng-if="dish.id && !isAlreadyLoading" class="dish flip-container flip-container-vertical" ng-class="{ reverse: dish.reverse }"><span class=dish-index>{{ $index + 1}}</span><div><div class="front left"><div class=ribbon-wrapper-green ng-if="incomplete_order.details.item_ids.indexOf(dish.id) > -1"><div class=ribbon-green>in bag</div></div><div class="restaurant only-for-mobile"><span class=icon-tastes></span> {{ dish.restaurant.name }} <span ng-if="data.filters.restaurant_id != dish.restaurant.id">( <a href=# url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false">see full menu</a> )</span></div><div class="col col1"><div class=dish-summary><h1><a href="?id={{dish.id}}" ng-click=selectDish(dish.id)><span ng-if=dish.has_custom_schedule class="icon icon-clock" title="Only available between {{dish.available_days.0.intervalString }}." tooltip=""></span> {{ dish.name }}</a></h1><article title="{{ dish.description }}">{{ dish.description | truncate:(115 - dish.name.length) }}</article></div><div class=bottom-links><a class=bookmark-heart ng-click=user.toggleFavorite(dish) ng-class="{ active: user.wishlist.indexOf(dish.menu_item_id) > -1 }"><u class=add>Add to favorites</u> <u class=remove>Remove from favorites</u></a> <a ng-if=!isFavoritesPage class=rotate ng-click=dislikeDialog(dish)><u>Don't show this dish again</u></a></div></div><div class="col col2"><span class=price>{{ dish.price | currency }}</span><div ng-if=dish.is_available_now><div ng-switch="incomplete_order && (incomplete_order.restaurant.id != dish.restaurant.id)"><span ng-switch-when=true class="button button-main btn-smaller-text" title="You have dishes from another restaurant in your bag. Cancel the order or empty your bag to select this dish." tooltip="">Empty Bag to Select</span> <a ng-switch-default="" href=# ng-click=selectDish(dish.id) class="button button-main">Order</a></div></div><span ng-if=!dish.is_available_now class="button button-main btn-smaller-text" title="Please check back {{dish.available_days.0.day}} between {{dish.available_days.0.intervalString }}" tooltip=""><span class=icon-clock></span> Not Available Now</span></div><div class="col col3"><div class=scores ng-if=dish.scores.length><div class=hint title="The percentages below represent how well the dish achieves each of your specific health goals based on expert nutritionist data and Bask's proprietary intelligence." tooltip="">How this dish achieves your goal<span ng-if="dish.scores.length > 1">s</span>&nbsp;<span class=icon-help></span></div><div class=score ng-repeat="score in dish.scores" ng-init="hint = score.goal.name + ': ' + Math.ceil(score.value * 100) + '%'"><figure class="goal goal-{{ score.goal.id }}" title="{{ hint }}" tooltip=""></figure><div class=goal-name>{{score.goal.name}}</div><div class=progressbar title="{{ hint }}" tooltip=""><div class=progress ng-style="{ width: Math.min(100, Math.ceil(score.value * 100)) + '%' }"></div></div><div class=percent>{{ Math.ceil(score.value * 100) }}%</div></div></div></div></div><div class=right><section class=restaurant><a class=unlink href=# url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false">{{ dish.restaurant.name | truncate:29 }}</a><figure><span ng-style="{ 'background-image': 'url('+ dish.restaurant.image_url +')', opacity: dish.restaurant.image_url ? false : 0.7 }"></span></figure><div class=extra-info><div><span class=icon-bag></span> Min Order: ${{ Math.ceil(dish.restaurant.minimum_order) }}</div><div ng-class="{ unlink: data.filters.restaurant_id == dish.restaurant.id }"><span class=icon-tastes></span> <a href=# url="{{ dish.restaurant.url }}" target=_blank ng-click=seeFullMenu(dish.restaurant) onclick="return false">See full menu</a></div></div></section></div></div></div></div></li></ul></div><div class=clearfix></div><div class=prevnext ng-if=dishes.length><a href=# class=prev ng-click=prev(1) ng-class="{ disabled: page <= 1 }"><span class=icon-arrowleft></span> Previous</a> <a href=# class=next ng-click=next(1) ng-class="{ disabled: isEverythingLoaded && page >= last_page }">Next <span class=icon-arrowright></span></a></div><div ng-if=!dishes.length class=no-results><div ng-if=isFavoritesPage><h2 class=engraved>No Favorites</h2><p class=engraved>You have nothing in your favorites now. Bookmark any dish from your <a ui-sref=primary.dishes>recommendations</a> to easily find it here at any time.</p></div><div ng-if=!isFavoritesPage><div ng-if=!user.address><h2 class=engraved>No Recommendations</h2><p class=engraved>You have no locations saved with your account. You must <a href=# ng-click=addNewAddress()>add a location</a> before you can get recommendations.</p></div><div ng-if="user.address && !dish && !incomplete_order"><h2 class=engraved>No Recommendations in Your Area</h2><p class=engraved>Unfortunately we cannot recommend any dishes that can be delivered to you that match your criteria. Please update your goals, diet type or search fields to get recommendations.</p></div><div ng-if="user.address && (dish || incomplete_order)"><h2 class=engraved>No Recommendations</h2><p class=engraved>Unfortunately, <em>{{ dish.restaurant.name || incomplete_order.restaurant.name }}</em> has no dishes in <em>{{ section.name }}</em> that match your health goals and diet preferences.</p></div></div></div></div></div></div><div ng-if=showFiltersInModal() id=pseudo-modal-filters class="center-on-mobile modal" ng-show1=openFilters ng-class="{ current: openFilters }"><div class=modal-backdrop ng-click=toggleMoreFilters(0)></div><div class=modal-dialog><div><div class="modal-content modal-filters"><div class=header><h2>Search Dishes</h2></div><div class=body><div ng-include="'/release/html/views/dishes/filters-form.html'"></div></div><div class=buttons><button class=submit type=button ng-click=applyFilters()>Apply Filters</button></div></div></div><a class=modal-close href=# ng-click=toggleMoreFilters(0)><i class=icon-cancel></i></a></div></div>