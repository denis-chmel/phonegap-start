<!-- /app/src/views/account/orders.html --><div class=header><h1>Order History</h1><div ng-if=data.in_progress><h2>You have an order in progress. For support, please contact <a href="https://www.grubhub.com/contact/" target=_blank>GrubHub</a>.<br></h2></div><div ng-if=!data.in_progress class=not-for-mobile><h2>Re-order something that you thoroughly enjoyed the first time around.<br>Improve future recommendations by scoring dishes that you havenâ€™t rated yet.</h2></div><!--
	<div class="subheader">
		<form class="form-control">
			<input class="subheader__search ng-pristine" placeholder="Search Food Types...">
			<select ng-model="resturaunts" class="subheader__select" fancy-select>
				<option ng-repeat="restaurant in restaurants" fancy-option>{{ restaurant }}</option>
			</select>
			<select ng-model="cusines" class="subheader__select" fancy-select>
				<option ng-repeat="cuisine in cuisines" fancy-option>{{ cuisine }}</option>
			</select>
		</form>
	</div>
	--></div><div class="contents orders" ng-if=data.orders.length><div class=order ng-repeat="order in data.orders"><div ng-if=!order.external_id class=scheduled><div class=progress><strong>Scheduled for Placing</strong></div></div><div ng-if=order.external_id ng-class="{ 'active' : order.external_id && (order.order_status == 'undelivered') }"><div class=progress ng-if="order.order_status == 'undelivered'"><strong>In Progress</strong><p ng-if=order.pickup>Preparing for pickup from the restaurant</p><p ng-if=!order.pickup>Delivering to {{ order.address.name}} ({{ order.address.address }} {{ order.address.address2 }} {{ order.address.city }} {{ order.address.zip}})</p></div><div class="progress success" ng-if="order.order_status == 'ready_for_pickup'"><strong>Ready for pickup</strong></div></div><div class=order__summary><div class=bask-row><div class="address col--quarter-three"><div class=flag><div class=flag__image><img class="avatar avatar--round" src="{{ order.restaurant.image_url }}" alt="{{ order.restaurant.name }}"></div><div class=flag__body><h3><a ui-sref="primary.dishes({ restaurant: order.reorder_restaurant_id || order.restaurant_id })">{{ order.restaurant.name }}</a> <small ng-if=order.reorder_restaurant_id class=debug>(ex <a ui-sref="primary.dishes({ restaurant: order.restaurant_id })">#{{ order.restaurant_id }}</a>)</small></h3><p class=address ng-if=!order.address ng-bind-html=order.restaurant.address><span class=phone>{{ order.restaurant.phone }}</span></p><p class=address ng-if=order.address>Delivered to {{ order.address.address }} {{ order.address.address2 }} {{ order.address.city }} {{ order.address.zip}}</p></div></div></div><div class="date col--quarter"><p>{{ order.delivered_at ? (order.delivered_at | date: 'MMM d, y h:mm a') : '' }}</p><p ng-if=order.external_id>Order #{{ order.external_id }}</p><p ng-if=!order.external_id>Cart #{{ order.id }}</p></div></div></div><div class=order__item ng-repeat="item in order.items" ng-model=items><div class=bask-row><div class=col--half><div class=flag><div class=flag__body><h3 ng-if="order.order_status == 'complete'"><label ng-if="item.reorder_dish.deleted_at || !item.reorder_dish.is_available_now" title="{{ !item.reorder_dish.deleted_at ? 'Next time available on ' + item.reorder_dish.available_days.0.day + ' between ' + item.reorder_dish.available_days.0.intervalString : 'Not available to reorder anymore' }}" tooltip=""><input type=checkbox disabled fancy-check=""><span>{{ item.quantity }} x {{ item.item.name }} <i class=notes ng-if=item.notes>{{ item.notes }}</i></span></label><label ng-if="!item.reorder_dish.deleted_at && item.reorder_dish.is_available_now"><input type=checkbox ng-model=item.reorder ng-change="choose(order, item)" fancy-check=""><span>{{ item.quantity }} x {{ item.item.name }} <i class=notes ng-if=item.notes>{{ item.notes }}</i></span></label></h3><h3 ng-if="order.order_status != 'complete'">{{ item.quantity }} x {{ item.item.name }} <i class=notes ng-if=item.notes>{{ item.notes }}</i></h3></div></div></div><div class="col--half text--right thumbs align-top"><span class="price text--green">{{ item.price | currency }}</span> <span ng-if="order.order_status == 'complete'"><a href="?item_id={{ item.id }}&rating=like" class="btn btn--small btn--border like" ng-click=like(item) ng-class="{ 'active': item.rating == 'like' }" data-tooltip=Like data-tooltip-position="top middle" incrementer=""><i class=icon-thumbsup></i></a> <a href="?item_id={{ item.id }}&rating=dislike" class="btn btn--small btn--border dislike" ng-click=dislike(item) ng-class="{ 'active': item.rating == 'dislike' }" data-tooltip=Like data-tooltip-position="top middle" incrementer=""><i class=icon-thumbsdown></i></a></span></div></div></div><div class=order__actions><div class=bask-row><div class="cost col--half"><h3 class=label>Total Cost</h3><p><b class=text--green>{{ order.total | currency }}</b></p></div><div class="col--half text--right"><div ng-if="order.order_status == 'complete'"><button ng-if=order.restaurant.is_open ng-click=submit(order) class="btn btn--green" ng-disabled=!order.reorder>Order Again</button> <span ng-if=!order.restaurant.is_open class="btn unavailable" title="Please check back {{order.items.0.reorder_dish.available_days.0.day}} between {{order.items.0.reorder_dish.available_days.0.intervalString }}" tooltip="">Not Available Now</span></div></div></div></div></div><!-- / order --><div ng-if="data.last_page > data.current_page"><div class="row--wrapper row--noborder"><div class="bask-row row__form-actions text--center row--nobg"><button ng-click="loadOrders(data.current_page + 1)" class=btn>Load Older Orders</button></div></div></div></div><div ng-if=!data.orders.length class=no-results><h2 class=engraved>No Previous History</h2></div>