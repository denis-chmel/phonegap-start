/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["modules/app","shepherdjs"],function(app){app.directive("tour",function($beacon,$timeout,$rootScope){return{restrict:"E",link:function($scope,element,$attrs){var is_tour_postponed=!0,cuisine_button_text="Ok, Ok",tour_types={welcome_tour:[{text:"Click this icon to reveal our filter menu so you can narrow down your results even further.",attachTo:".tour-filters-icon right",buttons:["Got it"]},{text:"Change your location or add a new one here.",attachTo:".address-dropdown top",buttons:["All right"]},{text:"You can favorite or dislike a dish here. This will help us learn about you and improve your recommendations!",attachTo:".between-like-and-dislike top",buttons:["start"]}],paleo_welcome_tour:[{text:"Click this icon to reveal our filter menu so you can narrow down your results even further.",attachTo:".tour-filters-icon right",buttons:["Got it"]},{text:"Change your location or add a new one here.",attachTo:".address-dropdown top",buttons:["All right"]},{text:"You can favorite or dislike a dish here. This will help us learn about you and improve your recommendations!",attachTo:".between-like-and-dislike top",buttons:["Gotcha!"]},{text:"When you see this icon attached to a dish, you know that our team of registered dietitians identified this dish as appropriate for your Paleo diet!",attachTo:".paleo-stamp top",buttons:["start"]}],login_now_tour:[{text:$attrs.tourText||"Please login to continue",attachTo:".signin bottom",buttons:["Ok"]}],first_dish_tour:[{text:"You've added your first dish, congrats! Now we'll recommend other dishes from the same restaurant. Use this menu to change sections within this restaurant.",attachTo:".dishes-content .section-switcher bottom",buttons:["Got it"]}],no_address_tour:[{text:'You must enter your location to view recommendations. Please select "Add New Location..." from the menu below to fix this.',attachTo:".address-dropdown top",buttons:["Got it"]}]};if($rootScope.$on("$stateChangeStart",function(){is_tour_postponed=!1,tour.hide()}),$beacon.on("modal.shown",function(){tour.hide()}),!tour_types.hasOwnProperty($attrs.tourType))return void console.warn("There's no such tour "+$attrs.tourType);var tour_steps=tour_types[$attrs.tourType],tour=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows"}}),silentlyShutdown=function(e){console.warn("welcomeTour error",e),$(".shepherd-step").remove(),tour.hide()};for(var i in tour_steps)if(tour_steps.hasOwnProperty(i)){var step=tour_steps[i];if(!(step.not_for_mobile&&$(window).width()<=640)){var buttons=[];for(var j in step.buttons)if(step.buttons.hasOwnProperty(j)){var button_type=step.buttons[j],button_params={};switch(button_type){case"start":button_params={text:"OK, Let me Bask Already!",classes:"shepherd-button shepherd-button-start",action:function(){try{$("body, html").stop().animate({scrollTop:0},800),tour.hide()}catch(e){silentlyShutdown(e)}}};break;default:button_params={text:button_type,classes:"shepherd-button",action:function(){var rotate_link=$(".rotate:first");rotate_link.length&&$(this).text()==cuisine_button_text&&$("body, html").stop().animate({scrollTop:rotate_link.offset().top},800);try{tour.next()}catch(e){silentlyShutdown(e)}}}}buttons.push(button_params)}tour.addStep("myStep",{title:$attrs.tour_title||'<span class="icon-help"></span> Bask Tour',text:step.text,attachTo:step.attachTo,classes:"shepherd shepherd-open shepherd-theme-arrows shepherd-transparent-text",buttons:buttons})}}tour.on("show",function(){$("html").addClass("welcomeTour")}),tour.on("hide",function(){$("html").addClass("welcomeTourFinished"),$timeout(function(){$("html").removeClass("welcomeTour welcomeTourFinished")},1e3)}),$("html, body").stop().animate({scrollTop:0},500);try{tour.start()}catch(e){silentlyShutdown(e)}}}})});