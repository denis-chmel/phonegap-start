/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["angular"],function(angular){var error=angular.module("error",[]);error.factory("$error",["$rootScope","$timeout",function($rootScope,$timeout){var timeoutPromise,self=this;self.alert=function(type,message){self.open({error:{type:type,message:message}})},self.warning=function(type,message){self.open({notificationType:"appWarning",error:{type:type,message:message}}),self.clear()};var startTimer=function(hide_in_ms){hide_in_ms=hide_in_ms||5e3,$timeout.cancel(timeoutPromise),$timeout(function(){$rootScope.messageBounce=!0},50),timeoutPromise=$timeout(function(){self.closeMessage()},hide_in_ms)};return self.open=function(params){var reset={messageBounce:!1,error:!1,success:!1,hide_in_ms:5e3,undo_alert_action:null,notificationType:null},apply_params=angular.extend(reset,params);$rootScope.messageBounce=!1,$timeout(function(){angular.extend($rootScope,apply_params),startTimer(apply_params.hide_in_ms)},200)},self.success=function(type,message,hide_in_ms,undo_alert_action){self.open({notificationType:"appSuccess",error:{type:type,message:message},hide_in_ms:hide_in_ms,undo_alert_action:undo_alert_action})},self.clear=function(){$rootScope.messageBounce=!1,$rootScope.error=!1,$rootScope.success=!1,$rootScope.notificationType=null},self.closeMessage=function(){$rootScope.messageBounce=!1,$timeout(function(){self.clear()},500)},$rootScope.$on("$stateChangeSuccess",function(){self.clear()}),self}]),error.directive("appError",["$rootScope","$error",function($rootScope,$error){return{restrict:"E",replace:!0,template:'<div class="appError {{ notificationType }}" ng-class="{ bounce: messageBounce }"><div class="appError-inner">{{ undo_alert_action }}<span ng-bind-html="error.message"></span><span ng-if="undo_alert_action"> (<a href="#" ng-click="closeMessage(); undo_alert_action()">Undo</a>)</span><i ng-click="closeMessage()">x</i></div></div>',link:function($scope){if($scope.closeMessage=$error.closeMessage,Modernizr.touch){var $fixedElements=$(".appError");$(document).on("focus",":input",function(){$fixedElements.addClass("ios-fix-position-fixed")}).on("blur",":input",function(){$fixedElements.removeClass("ios-fix-position-fixed"),setTimeout(function(){window.scrollTo(document.body.scrollLeft,document.body.scrollTop)},0)})}}}}])});