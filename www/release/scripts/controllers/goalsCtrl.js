/*! Compiled on: 2014-11-25 */
var fileVersion = 20141125; 
"use strict";define(["modules/app","goalsFactory","dietsFactory","usersFactory","checkbox","authenticationFactory"],function(app){app.controllerManager("goalsCtrl",["$scope","$rootScope","$state","goalsFactory","usersFactory","dietsFactory","authenticationFactory","$beacon",function($scope,$rootScope,$state,goalsFactory,usersFactory,dietsFactory,authenticationFactory,$beacon){$rootScope.description="",$rootScope.title="",$rootScope.state="goals",$rootScope.showCart=!1,$beacon.on("authentication.change",function(){$scope.goals=$scope.diets=null}),goalsFactory.getAll().then(function(goals){$scope.goals=goals}),dietsFactory.getAll().then(function(diets){$scope.diets=diets}),$scope.submit=function(){for(var goals=[],diets=[],i=0;i<this.goals.length;i++)this.goals[i].checked&&goals.push(this.goals[i].id);for(var i=0;i<this.diets.length;i++)this.diets[i].checked&&diets.push(this.diets[i].id);usersFactory.update({goals:goals,diets:diets}).then(function(){$state.transitionTo("primary.tastes"),authenticationFactory.me().then(function(me){console.log(me)})})}}])});