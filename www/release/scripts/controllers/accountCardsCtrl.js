/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["modules/app","utils/dependcyManager","cardsFactory","maskedInput"],function(app,dependcyManager){app.controllerManager("accountCardsCtrl",["$scope","$rootScope","$modal","cardsFactory","$loading","$beacon","$error",function($scope,$rootScope,$modal,cardsFactory,$loading,$beacon,$error){$scope.items=[],$scope.itemsLoaded=!1;var reloadCards=function(){$loading.start(),cardsFactory.getList().then(function(cards){$scope.items=cards,$scope.itemsLoaded=!0,$loading.end()})};reloadCards(),$beacon.on("card.touched",reloadCards),$scope.remove=function(item){cardsFactory.remove(item).then(function(){$error.success(null,"Card was successfully removed")})},$scope.edit=function(item){$modal.open({templateUrl:"/release/html/modals/account/editCard.html",controller:"accountEditCardCtrl",resolve:{controller:dependcyManager.resolve("controllers/accountEditCardCtrl"),item:function(){return angular.copy(item)}}})},$scope.add=function(){$modal.open({templateUrl:"/release/html/modals/account/editCard.html",controller:"accountEditCardCtrl",resolve:{controller:dependcyManager.resolve("controllers/accountEditCardCtrl"),item:function(){return null}}})}}])});