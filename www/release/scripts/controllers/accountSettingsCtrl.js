/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["modules/app","utils/dependcyManager","checkbox","usersFactory"],function(app){app.controllerManager("accountSettingsCtrl",["$scope","$rootScope","$loading","usersFactory","$error",function($scope,$rootScope,$loading,usersFactory,$error){$scope.user=$rootScope.user,"male"==$scope.user.gender?$scope.user.gender={male:{checked:!0}}:"female"==$scope.user.gender&&($scope.user.gender={female:{checked:!0}}),$scope.user.notifications.daily=$scope.user.notifications.daily?{checked:!0}:{checked:!1},$scope.user.notifications.rating=$scope.user.notifications.rating?{checked:!0}:{checked:!1},$scope.user.height=$scope.user.height||null,$scope.user.weight=$scope.user.weight||null,$scope.user.birth_year=$scope.user.birth_year||null,$scope.user.phone=$scope.user.phone||null,$scope.submit=function(){return $loading.start(),($scope.password||$scope.confirmPassword)&&$scope.password!==$scope.confirmPassword?($error.alert(null,"Passwords do not match."),void $loading.end()):void usersFactory.update({first_name:$scope.user.first_name,last_name:$scope.user.last_name,birth_year:$scope.user.birth_year,height:$scope.user.height,weight:$scope.user.weight,email:$scope.user.email,password:$scope.password,phone:$scope.user.phone,gender:$scope.user.gender.male.checked?"male":"female",notifications:{rating:$scope.user.notifications.rating.checked?1:0,daily:$scope.user.notifications.daily.checked?1:0}}).then(function(){$error.success("update","Your changes have been saved.")},function(response){$error.alert(null,response.data.data)}).finally(function(){$loading.end()})}}])});