/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["modules/app","dietsFactory","usersFactory","checkbox","authenticationFactory","utils/dependcyManager"],function(app){app.controllerManager("accountDietsCtrl",["$scope","$rootScope","$state","usersFactory","dietsFactory","authenticationFactory","$modal","$loading","$error",function($scope,$rootScope,$state,usersFactory,dietsFactory,authenticationFactory,$modal,$loading,$error){dietsFactory.getAll($rootScope.user).then(function(diets){$scope.diets=diets,0==$rootScope.user.diets.length&&angular.forEach($scope.diets,function(diet){"No Diet"==diet.diet&&(diet.checked=!0)})}),$scope.submit=function(){var diets=[];$loading.start();for(var i=0;i<this.diets.length;i++)this.diets[i].checked&&diets.push(this.diets[i].id);usersFactory.update({diets:diets}).then(function(){$state.transitionTo("primary.dishes").then(function(){$loading.end(),$error.success("update","Your new diet preference has been saved.")})})}}])});