/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["modules/app","utils/dependcyManager","usersFactory"],function(app,dependcyManager){app.controllerManager("accountLocationCtrl",["$scope","$currentUser","$modal","usersFactory","$beacon",function($scope,$currentUser,$modal,usersFactory,$beacon){$scope.addresses=$currentUser.addresses,$beacon.on("address.updated",function(){$scope.refreshAddresses()}),$scope.refreshAddresses=function(){usersFactory.getCurrentUserFromAPI().then(function(user){$currentUser.addresses=$scope.addresses=user.addresses})},$scope.add=function(){$modal.open({templateUrl:"/release/html/modals/account/addAddress.html",controller:"accountAddAddressCtrl",resolve:{controller:dependcyManager.resolve("controllers/accountAddAddressCtrl"),isFirst:function(){return!$scope.addresses.length},address:function(){return null},success:function(){return function(){$scope.refreshAddresses()}}}})}}])});