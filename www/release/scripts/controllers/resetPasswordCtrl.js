/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["modules/app","authenticationFactory"],function(app){app.controllerManager("resetPasswordCtrl",["$scope","$rootScope","$modalInstance","$http","config","$loading","$error","$location","authenticationFactory","$timeout",function($scope,$rootScope,$modalInstance,$http,config,$loading,$error,$location,authenticationFactory,$timeout){$scope.token=$location.search().code,$scope.submit=function(){var form=this;$loading.start(),$http.post(config.api+"/password/reset",{email:form.email,password:form.password,password_confirmation:form.password_confirmation,token:form.token}).success(function(){$modalInstance.close(),authenticationFactory.signIn({email:form.email,password:form.password}).then(function(){$timeout(function(){$error.success(null,"Your password was successfully changed. Welcome back, "+$rootScope.user.greeting+"!")},1e3)})}).error(function(response){$error.alert(null,response.data)}).finally(function(){$loading.end()})}}])});