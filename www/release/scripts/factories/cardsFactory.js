/*! Compiled on: Thu May 21 2015 08:13:23 */
var fileVersion = "v1.0-4-f842d9e-dirty"; 
"use strict";define(["modules/app"],function(app){app.factoryManager("cardsFactory",["config","$q","$resource","$beacon",function(config,$q,$resource,$beacon){var self=this,resource=$resource(config.api+"/me/credit_card/:id",{},{query:{method:"GET",isArray:!0,authentication:!0},addCard:{method:"POST",authentication:!0},save:{method:"PUT",authentication:!0,params:{id:"@id"}},deleteCard:{method:"DELETE",authentication:!0,params:{id:"@id"}}});return self.getList=function(){return resource.query().$promise},self.add=function(card){return resource.addCard(card).$promise.then(function(){$beacon.trigger("card.added"),$beacon.trigger("card.touched")})},self.save=function(card){var q=card.id?resource.save(card):resource.addCard(card);return q.$promise.then(function(){$beacon.trigger("card.updated"),$beacon.trigger("card.touched")})},self.remove=function(card){return resource.deleteCard(card).$promise.then(function(){$beacon.trigger("card.removed"),$beacon.trigger("card.touched")})},self}])});